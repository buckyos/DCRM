# DMC20介绍

## Token的基本概念与时间线
DMC20由一系列Token组成，充分利用了L2的技术和比特币Ordinal协议。
- DMC（2.0）：发行在 X Layer(由OKX构建的ETH L2)上的标准ERC20 Token，总量为10亿，其中50%可挖。，可以通过 X Layer的L2<->L1桥转换到ETH主链上,进而可以使用整个ETH生态。DMC2.0主合约部署在L2上，手续费使用OKB支付，比L1便宜很多。今天的DMC(1.0)将能通过中心化跨链桥转换成DMC2.0. DMC2.0的合约为Token Holder提供了更多的权益，其中最重要是质押DMC获得GWT分红。
- GWT(Gb per Week Token) : DMC体系的存储稳定币，代表1GB数据保存1周，无发行上限。首发在 XLayer上，未来计划在所有的EVM兼容链上发行。我们会和合作伙伴一起构建大量的垮链桥，以帮助GWT在所有的链之间流通。所有的存储挖矿的核心逻辑都是质押GWT获得有效空间，保存数据提交存储证明后获得有效存储算力，根据当前链的总存储算力的增长情况的到算力奖励的GWT。GWT我们希望能有更大量的交易，其价格也应该更稳定。
- DMCs(DMCsp):基于Ordinal 协议发行在BTC上，总量2.1亿。DMCs的目标是将更有价值的数据铭刻在BTC网络上，其经济模型独立与EVM兼容链体系。（已基本完成实现，具体实现本文未介绍）


### 时间线
第一期：在XLayer上线4个关键合约，完成DMC20的体系的框架构建。（本周）
- DMC20主合约(ERC20@XLayer)
- GWT合约(ERC20@XLayer)
- DMC<->GWT合约，又可看作DMC20的挖矿合约。这个合约里包含早期的，测试用的限量free mint,用户可以花费很少的手续费得到GWT。
- DMC分红合约。通过质押DMC可以获得DMC生态手续费收入的分红
（上述均为有限可升级合约，当关闭升级能力后，这些合约的实现都会稳定下来不可修改）

第二期：如果第一期的合约没有重大问题会部署2个重要的合约 （2周后）
- DMC1.0 -> DMC2.0 中心化跨链桥
- 公共数据合约以及新版本的s.dmctech.io

第三期：前两期都是做加法，这一期对现有DMC的挖矿生态有影响，需要慎重的计划时间点 （时间未定，6月底7月初？）
- 私有数据存储挖矿，用户可用通过质押GWT并出售自己的闲置空间获得GWT收入和GWT算力奖励。也可通过支付GWT获得备份空间，并得到GWT算力奖励。


## DMC20<->GWT的兑换
DMC20体系将Token分成了两大类。一大类是算力稳定币，我们计划发行3种：存储稳定币GWT，传输稳定币：MST，计算稳定币待定。另一大类是生态权益币DMC。
该体系让我们能拥有面向未来的可扩展能力，同时也能继承今天的DMC共识，并通过分离 算力稳定币的挖矿和DMC的挖矿，实现更简单可靠的经济模型和更高水平的博弈。


### 用GWT兑换未分配的DMC20

继承自DMC1.0的白皮书，待挖矿（待释放的）DMC20有一个确定的释放曲线：
```
从2024年X月开始一共有420个周期，每个周期大概是现实世界的1周。每21个周期进行一次难度调整。难度调整后的周期释放的Token是上一个周期的80%。总释放是=5亿DMC
第1-21周，每周最多释放480万枚DMC。随后的第21-42周，每周最多释放480万*0.8枚DMC
```
每周开始，系统都会计算一次DMC:GWT的比例。在这个周期里，任何人都可以用这个比例将GWT换成DMC，直到换完。下个周期会根据上个周期的DMC兑换情况调整比例：
```
如果上个周期的DMC都兑换完成了，则兑换比例提高：需要更多的GWT才能换到1个DMC
如果上个周期的DMC未兑换完成，则兑换比例下降：需要更少的GWT能换到1个DMC。
兑换比例的提高和下降，不能超过20%，兑换比例的下限是210（至少需要210个GWT才能换1个DMC）
```
用户用于兑换DMC的GWT不会销毁，而是成为DMC组织的收入并进入DMC分红合约的利润池。

### 销毁DMC20得到GWT
用户销毁1个DMC，可以得到 兑换比例*1.2个GWT。
这种机制形成了一个初看有利可图的套利盘：用户将GWT兑换成DMC，然后再销毁DMC得到GWT。这种套利操作是刻意引导（鼓励）的早期用户行为。至少可以在挖矿未上线的情况下，用传统的DeFi流动性挖矿逻辑，能让一部分金融爱好者先互相博弈起来。


## 基于DMC20的分红
上面说到，用GWT兑换DMC的GWT不会被销毁，而是进入分红池。质押DMC并得到分红权是DMC20的一个重要权益，也是对DMC流动性控制的系统性设计。DMC20的分红权益的基本原理是
```
任何人都可以给DMC分红池打入收入（支持任何币种）。
DMC20分红池的主要的收入来源是我们的一些重要的合约，这些合约会将一些行为里设计到的资产固定的作为利润打入分红池。
根据利润进入分红池的时间，我们可以有不同的分红周期。用户质押DMC后，会按比例获得下一个周期的分红权。
```

每条链上的GWT挖矿合约都会有一个利润池，随后通过基金会中心化机制跨链转移到XLayer上并打入DMC20的分红池。因此DMC20的持有者在质押DMC后，得到的是整个DMC生态利润的分红权

## DMC20 流动性挖矿的博弈
是否需要销毁DMC20来获得GWT?早期GWT挖矿难度低，有更多的GWT质押能更快的获得更多算力，但是早期销毁DMC20得到的GWT相对较少。
是否需要接触DMC20质押：用户手头的DMC20肯定会去进行质押挖矿（不然就白拿着了），但接触质押需要消耗手续费，而且会损失一个周期的分红权。会让用户犹豫，这种犹豫能潜在的减少DMC20的卖盘。
是否需要将GWT换成DMC？早期兑换比例低，用更少的GWT就有机会换到DMC，但早期GWT的挖矿难度也低，更多的质押币能更快的获得竞争优势。

## GWT的挖矿

### 公共数据挖矿 （之前的dmcs的文章里有过介绍，这里不详细讲解）

我们不提供公共数据挖矿的自动挖矿程序，公共数据挖矿更像是GWT持有者参与的另一个挖矿游戏。

从DApp的角度来说，公共数据挖矿的流程是：
1. 安装DApp
2. 在DApp的网页中配置存储空间
3. 通过质押GWT来获得有效的公共数据存储空间，目前该值为有效空间*16*64，也就是说获得1G的有效公共数据存储空间，需要质押1024个GWT.
4. 浏览公共数据，选中公共数据后尝试SHOW Proof来获得GWT。该GWT一方面来自公告数据的余额，另一方面来自苏案例奖励
5. SHOW Proof会冻结（质押）一定数量的GWT，数量和SHOW成功后的回报有关。用户可以在SHOW之前通过DAapp的界面来决定质押的数量
    需要额外冻结的GWT一般与SHOW成功的回报有关。SHWO成功得到的回报越大，则需要冻结的GWT越多。
6. SHOW Proof会将公共数据的MixHash加入用户的公共数据持有列表，并消耗有效公共数据存储空间。
7. 用户可以随时释放公共数据来获得更多的有效公共数据存储空间
8. 通过释放未使用的公共数据存储空间，用户可以拿回质押的GWT

DApp提供了一系列API，可以让有技术的玩家制定更符合自己需要的策略来自动的玩公共数据存储挖矿，赢得更多的收益。


### 私有数据挖矿（和DMC1.0的机制基本接近，核心区别就是整个流程只使用GWT）

1. 出售存储资源的用户被称作供应商，可以挂卖单，卖单应详细的描述其存储资源的定义和价格。约定：

- 存储总大小，
- 存储单价（定价单位从0.125到8,单位是GWT(Gb per Week Token）
- 存储有效时间（系统规定最小有效期为24周），
- 单次购买的最小大小(需小设置为2GB)。
- 存储质量

2. 挂卖单时矿工用GWT缴纳质量保证金，用来在存储出现问题时赔付给用户。

```
保证金总额 = 卖单总空间*有效时间*单价*质保比率
```

系统有要求最小质保比率(0.5)，用户可以根据实际的市场竞争调高该保证金。存储价格，质保比率会影响供应方在算力奖励里的比率。
比如用户有100G空间，挂单24周，价格是2，质保比率是0.5,那么在挂单时，矿工需要准备好 `100*24*2*0.5 = 2400`个GWT的质保金。

3. 有需求的用户（需求方）可以选择一个已挂单购买自己需要的空间

```
存储费用=需求空间*剩余有效时间*单价。
```
用户并不能选择有效时间。当一个存储订单的剩余有效时间小于系统的最小存储有效时间时，用户无法购买该存储订单。为了降低GAS Fee，用户在购买空间时应设置数据的MixHash.

4. 已成交订单进入等待（数据）状态。数据交付的流程是需求方首先根据供应方公开的账号信息，通过链下协议将数据传输给供应商。供应商收到数据后调用合约接口确认该数据的MixHash。此后订单进入交付状态。

5. 未进入交付状态的订单双方都可以随时取消。取消后，用户会立刻得到退款，矿工则是回复了该存储订单的空间。

6. 订单进入交付状态12周后，可以调用“提现操作”，提现操作会让供应方得到收入+算力奖励GWT，让用户得到算力奖励GWT。此时系统会在该过程中抽取一部分交易费用GWT。

7. 矿工可以随时减少卖单的有效剩余空间。有效剩余空间减少后，矿工会得到退还的质保金。

8. 当矿工发现数据丢失时，可以主动声明数据丢失。此时只会赔付给用户质保金的80%，并拿回剩余的20%。

9.	供应方因为正常的技术理由可以申请订单请假（请假的频率基于有效长度有最大限制），订单请假期间其无法发起存储挑战。供应方可以在主动调用合约接口将请假状态的订单恢复正常。

10.	存储订单可以协议取消（一方发起，另一方同意），此时双方都会得到剩余交付时间的退款。

11. 使用官方的挖矿软件不会碰到其它异常情况，因此本文不讨论存储挑战等情况下的经济模型


## MST的挖矿：传输挖矿 （下一个大的规划）
MST 是 Mb per Sec Token的缩写。代表1秒1MB的数据传输。

### 用torrent发布公共数据
1. 我们可以验证一个种子是否被发布到DMC网络
2. 用户消耗手续费将种子发布到DMC网络
3. 对tracker进行改造

### BT下载挖矿
1. 用户发布种子，消耗GWT
2. 用户加速下载，消耗GWT
3. 用户A上传给用户B，用户B构造传输证明给A，随后用户A向Tracker提交传输证明成功，赚取GWT
4. 任何人都可以查询用户在某个文件上是否有足够的余额（每个用户都有通用余额和指定数据的专用余额）
5. 用户通过支付GWT，可以提高指定数据的余额
6. 用户A通过定义提交种子文件的存储证明，可以得到公共数据挖矿的奖励


## DMC20矿工的基本策略

1. 根据自己的存储能力，决定存储的价格和质押率
2. 根据对挖矿奖励的期望，决定存储的价格和质押率
3. 适当的挂出卖单，因为每次挂单都有可能真正的锁定GWT质押，因此需要谨慎操作
4. 手工撤回为成交的卖单，已得到质押GWT的立刻退还
5. 自动的处理存储订单的交付，也可手工处理黑名单用户的订单。
6. 理解挖矿规则后，从节约手续费、锁定有利的系统参数、以及及时获得流动性3个角度在合适的时候提现。
7. 在GWT全链转换的基础上，认证思考如何在不同链上挖矿（寻找挖矿难度更低的链），以及合适转移GWT




