# DMC 铭文协议
设计目标是在保持和现有Orindal协议尽量兼容的基础上，能实现公共数据铭刻



## Mint DMC
使用标准的Orindal协议进行Mint，根据现在部署的BRC20，成功获得210个DMC
我们的扩展增加了“lucky”关键字（最长32个字节），当带有该关键字的交易进入被64整除的区块时，用户会得到2100个DMC

```
{"p":"brc-20","op":"mint","tick":"DMC ","amt":"2100","lucky":"dmc-discord"}
```

## 铭刻公共数据
"铭文内容包含在揭示交易的输入中，铭文是在其第一个输出的第一个sat上制作的。" 
Mint公共数据的逻辑是向 特定地址按Orindal协议进行DMC转账，并在转账备注中带上公共数据的Hash值
铭刻时系统会从ETH网络中同步一些公共数据的MetaData过来，作为首次铭刻者，用户也可以写入一些不可修改的数据。

Mint公共数据需要用户支付数量为n的DMC，并且有数量为n的余额。
n的数量是datasize*datasocre*2,在数据积分不变的情况下，这是ShowData的奖励的2倍。（在ETH网络没有记录的数据的积分是1）.
用户为了Mint公共数据支付的DMC会进入待Mint数据池。
Mint成功后希望得到Ordinal协议兼容的NFT，如何实现？

Mint数据成功的条件：
    用户的上一个BTC交易的hash与公共数据的hash满足一定的阈值。基本逻辑是有用户总是可以Mint 1/32的公共数据
    如果在一个区块里同时有多个用户Mint同一个公共数据，那么和公共数据最近的用户可以Mint成功，其它用户的交易失败，但是不会退回DMC。


```
{"p":"pi","op":"inscribe","ph":"$hash","text":"$text bind to public data","amt":1000}
```
## ShowData Mint
展示数据来获得DMC奖励。
dmc = datasize*datascore(奖励范围从500到50000)
如果展示的数据不是自己拥有的数据，那么无法得到该100%的数据奖励，会有20%的奖励被转移到数据的当前拥有者身上
```
{"p":"pi","op":"show","ph":"xxx","path":[h1,h2,h3,h4 ... ],index:232}
```
数据展示成功的条件
    1.用户拥有该数据或用户赞助了该数据
    2.数据的Hash与进块的块高度满足一定的关系（相当于Show间隔）
    3.用户有和数据大小相当的DMC余额
    4.同一个用户在一个区块里，只能Show一个数据
当ShowData在比特币区块n上联时，其读取的公共数据积分依赖的是ETH区块m时的积分。m和n的关系是：


## 转移公共数据的Owner
使用Ordinal的标准NFT方法转移Owner

## 给公共数据定一个赞助价
公共数据默认不允许被赞助（赞助价格是0）
用户需要通过一条特殊的交易来设置赞助价。赞助价的的上限是根据当前数据积分，购买该数据的费用
```
{"p":"pi","op":"set","ph":"xxx","price":1000}
```


## 赞助一个公共数据
向数据的拥有者转账，并设置想要赞助的数据Hash。
转账金额小于该数据当前的赞助价时，转账失败
赞助成功后，用户拥有通过Show该数据
如果目标用户不拥有数据，该笔转账会退回
```
{p:"brc-20","op":"transfer","tick":"DMC ","amt":"1000","to":"$dataowner",ph:"$datahash"}
```
## Mint与公共余额的关系
ShowData和Mint DMC操作都会影响系统的可MintDMC余额，当可MintDMC余额不足时，任何Mint操作只有部分效果。